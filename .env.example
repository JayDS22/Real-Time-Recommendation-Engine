# Real-Time Recommendation Engine Environment Configuration
# Copy this file to .env and update the values according to your setup

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=recommendations
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=postgres

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================

# Kafka Bootstrap Servers
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Kafka Topics
KAFKA_TOPIC_USER_INTERACTIONS=user_interactions
KAFKA_TOPIC_ITEM_UPDATES=item_updates
KAFKA_TOPIC_RECOMMENDATIONS=recommendations
KAFKA_TOPIC_AB_TESTS=ab_test_events

# =============================================================================
# MLFLOW CONFIGURATION
# =============================================================================

# MLflow Tracking Server
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=recommendation_engine
MLFLOW_ARTIFACT_LOCATION=/tmp/mlflow-artifacts

# =============================================================================
# API CONFIGURATION
# =============================================================================

# FastAPI Settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_MAX_RECOMMENDATIONS=50
API_CACHE_TTL=300

# Rate Limiting
API_RATE_LIMIT=1000
API_RATE_LIMIT_PERIOD=60

# =============================================================================
# SPARK CONFIGURATION
# =============================================================================

# Spark Application Settings
SPARK_APP_NAME=RecommendationEngine
SPARK_MASTER=local[*]
SPARK_EXECUTOR_MEMORY=2g
SPARK_DRIVER_MEMORY=1g
SPARK_EXECUTOR_CORES=2

# Delta Lake Configuration
DELTA_WAREHOUSE_PATH=/tmp/delta-warehouse
SPARK_CHECKPOINT_LOCATION=/tmp/spark-checkpoint

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# SVD Model Parameters
SVD_FACTORS=100
SVD_LEARNING_RATE=0.01
SVD_REGULARIZATION=0.1
SVD_EPOCHS=100

# NMF Model Parameters
NMF_FACTORS=50
NMF_ALPHA=0.0001
NMF_L1_RATIO=0.0
NMF_MAX_ITER=200

# Collaborative Filtering
CF_MIN_INTERACTIONS=5
CF_TOP_K=20
CF_SIMILARITY_THRESHOLD=0.1

# =============================================================================
# FEATURE ENGINEERING
# =============================================================================

# Dimensionality Reduction
FEATURE_TARGET_VARIANCE=0.95
FEATURE_MAX_COMPONENTS=1000
FEATURE_REDUCTION_METHOD=pca

# Feature Selection
FEATURE_SELECTION_METHOD=mutual_info
FEATURE_K_BEST=100

# Normalization
FEATURE_NORMALIZATION_METHOD=minmax
FEATURE_RANGE_MIN=0
FEATURE_RANGE_MAX=1

# =============================================================================
# A/B TESTING CONFIGURATION
# =============================================================================

# Default A/B Test Settings
AB_DEFAULT_TRAFFIC_SPLIT=0.5
AB_MIN_SAMPLE_SIZE=1000
AB_SIGNIFICANCE_LEVEL=0.05
AB_STATISTICAL_POWER=0.95
AB_MIN_EFFECT_SIZE=0.02
AB_MAX_EXPERIMENT_DURATION=30

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Prometheus Configuration
PROMETHEUS_PORT=8001
PROMETHEUS_METRICS_PATH=/metrics

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/recommendation-engine.log

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# API Performance
API_MAX_WORKERS=10
API_TIMEOUT=30
API_KEEP_ALIVE=2

# Cache TTL Settings (in seconds)
CACHE_USER_PROFILES_TTL=3600
CACHE_ITEM_FEATURES_TTL=7200
CACHE_RECOMMENDATIONS_TTL=1800

# Batch Processing
STREAMING_BATCH_INTERVAL=10
STREAMING_MAX_RECORDS_PER_BATCH=1000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# API Security
API_SECRET_KEY=your-secret-key-here
API_ACCESS_TOKEN_EXPIRE_MINUTES=30

# Database Security
DB_SSL_MODE=prefer
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_CA_PATH=

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Environment Mode
ENVIRONMENT=development
DEBUG=true

# Testing Configuration
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/test_recommendations
TEST_REDIS_URL=redis://localhost:6379/1

# Sample Data Generation
GENERATE_SAMPLE_DATA=true
SAMPLE_USERS=10000
SAMPLE_ITEMS=2000
SAMPLE_INTERACTIONS=100000

# =============================================================================
# CLOUD CONFIGURATION (Optional)
# =============================================================================

# AWS Configuration (if using AWS services)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_S3_BUCKET=recommendation-engine-artifacts

# Azure Configuration (if using Azure services)
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=
AZURE_CONTAINER_NAME=recommendations

# GCP Configuration (if using GCP services)
GOOGLE_APPLICATION_CREDENTIALS=
GCP_PROJECT_ID=
GCP_BUCKET_NAME=recommendation-engine

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Model Serving
MODEL_SERVING_BATCH_SIZE=32
MODEL_SERVING_MAX_LATENCY_MS=100
MODEL_SERVING_TIMEOUT_SECONDS=30

# Real-time Processing
REALTIME_PROCESSING_ENABLED=true
REALTIME_UPDATE_INTERVAL=60
REALTIME_BUFFER_SIZE=10000

# Data Retention
DATA_RETENTION_DAYS=90
MODEL_RETENTION_VERSIONS=5
LOG_RETENTION_DAYS=30

# Resource Limits
MAX_MEMORY_USAGE_MB=4096
MAX_CPU_USAGE_PERCENT=80
MAX_DISK_USAGE_GB=50
